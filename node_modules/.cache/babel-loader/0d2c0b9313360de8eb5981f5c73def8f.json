{"ast":null,"code":"import { __awaiter as e } from \"../../../node_modules/tslib/tslib.es6.js\";\nimport { jsx as t, jsxs as o } from \"react/jsx-runtime\";\nimport i from \"qrcode\";\nimport * as r from \"react\";\nimport { Logger as s, Auth as a } from \"aws-amplify\";\nimport { translate as n, getActorState as m } from \"@aws-amplify/ui\";\nimport { Flex as d } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as l } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as c } from \"../hooks/useAuthenticator/index.js\";\nimport { useCustomComponents as p } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as u } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as f } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as h } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as g } from \"../shared/FormFields.js\";\nimport { RouteContainer as j } from \"../RouteContainer/RouteContainer.js\";\n\nconst v = new s(\"SetupTOTP-logger\"),\n      b = (e, t, o) => encodeURI(`otpauth://totp/${e}:${t}?secret=${o}&issuer=${e}`),\n      C = _ref => {\n  let {\n    className: s,\n    variation: l\n  } = _ref;\n  var O, y;\n  const {\n    _state: H,\n    isPending: w\n  } = c(e => [e.isPending]),\n        {\n    handleChange: F,\n    handleSubmit: S\n  } = u(),\n        {\n    components: {\n      SetupTOTP: {\n        Header: T = C.Header,\n        Footer: x = C.Footer\n      }\n    }\n  } = p(),\n        [P, V] = r.useState(!0),\n        [R, k] = r.useState(),\n        [I, L] = r.useState(\"COPY\"),\n        [M, $] = r.useState(\"\"),\n        q = m(H),\n        {\n    formFields: D,\n    user: E\n  } = q.context,\n        {\n    totpIssuer: U = \"AWSCognito\",\n    totpUsername: Z = E.username\n  } = null !== (y = null === (O = null == D ? void 0 : D.setupTOTP) || void 0 === O ? void 0 : O.QR) && void 0 !== y ? y : {},\n        A = r.useCallback(t => e(void 0, void 0, void 0, function* () {\n    try {\n      const e = yield a.setupTOTP(t);\n      $(e);\n      const o = b(U, Z, e),\n            r = yield i.toDataURL(o);\n      k(r);\n    } catch (e) {\n      v.error(e);\n    } finally {\n      V(!1);\n    }\n  }), [U, Z]);\n  r.useEffect(() => {\n    E && A(E);\n  }, [A, E]);\n  return t(j, Object.assign({\n    className: s,\n    variation: l\n  }, {\n    children: t(\"form\", Object.assign({\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: F,\n      onSubmit: S\n    }, {\n      children: o(d, Object.assign({\n        as: \"fieldset\",\n        direction: \"column\",\n        isDisabled: w\n      }, {\n        children: [t(T, {}), o(d, Object.assign({\n          direction: \"column\"\n        }, {\n          children: [P ? o(\"p\", {\n            children: [n(\"Loading\"), \"…\"]\n          }) : t(\"img\", {\n            \"data-amplify-qrcode\": !0,\n            src: R,\n            alt: \"qr code\",\n            width: \"228\",\n            height: \"228\"\n          }), o(d, Object.assign({\n            \"data-amplify-copy\": !0\n          }, {\n            children: [t(\"div\", {\n              children: M\n            }), o(d, Object.assign({\n              \"data-amplify-copy-svg\": !0,\n              onClick: () => {\n                navigator.clipboard.writeText(M), L(n(\"COPIED\"));\n              }\n            }, {\n              children: [t(\"div\", Object.assign({\n                \"data-amplify-copy-tooltip\": !0\n              }, {\n                children: I\n              })), t(\"svg\", Object.assign({\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                xmlns: \"http://www.w3.org/2000/svg\"\n              }, {\n                children: t(\"path\", {\n                  d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n                })\n              }))]\n            }))]\n          })), t(g, {}), t(h, {})]\n        })), t(f, {}), t(x, {})]\n      }))\n    }))\n  }));\n};\n\nC.Header = function () {\n  return t(l, Object.assign({\n    level: 3\n  }, {\n    children: n(\"Setup TOTP\")\n  }));\n}, C.Footer = function () {\n  return null;\n};\nexport { C as SetupTOTP, b as getTotpCode };","map":{"version":3,"names":["__awaiter","e","jsx","t","jsxs","o","i","r","Logger","s","Auth","a","translate","n","getActorState","m","Flex","d","Heading","l","useAuthenticator","c","useCustomComponents","p","useFormHandlers","u","ConfirmSignInFooter","f","RemoteErrorMessage","h","FormFields","g","RouteContainer","j","v","b","encodeURI","C","className","variation","O","y","_state","H","isPending","w","handleChange","F","handleSubmit","S","components","SetupTOTP","Header","T","Footer","x","P","V","useState","R","k","I","L","M","$","q","formFields","D","user","E","context","totpIssuer","U","totpUsername","Z","username","setupTOTP","QR","A","useCallback","toDataURL","error","useEffect","Object","assign","children","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level","getTotpCode"],"sources":["/Users/arnavmisra/Desktop/Portfolio-main/Portfolio/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.js"],"sourcesContent":["import{__awaiter as e}from\"../../../node_modules/tslib/tslib.es6.js\";import{jsx as t,jsxs as o}from\"react/jsx-runtime\";import i from\"qrcode\";import*as r from\"react\";import{Logger as s,Auth as a}from\"aws-amplify\";import{translate as n,getActorState as m}from\"@aws-amplify/ui\";import{Flex as d}from\"../../../primitives/Flex/Flex.js\";import{Heading as l}from\"../../../primitives/Heading/Heading.js\";import{useAuthenticator as c}from\"../hooks/useAuthenticator/index.js\";import{useCustomComponents as p}from\"../hooks/useCustomComponents/index.js\";import{useFormHandlers as u}from\"../hooks/useFormHandlers/useFormHandlers.js\";import{ConfirmSignInFooter as f}from\"../shared/ConfirmSignInFooter.js\";import{RemoteErrorMessage as h}from\"../shared/RemoteErrorMessage.js\";import{FormFields as g}from\"../shared/FormFields.js\";import{RouteContainer as j}from\"../RouteContainer/RouteContainer.js\";const v=new s(\"SetupTOTP-logger\"),b=(e,t,o)=>encodeURI(`otpauth://totp/${e}:${t}?secret=${o}&issuer=${e}`),C=({className:s,variation:l})=>{var O,y;const{_state:H,isPending:w}=c((e=>[e.isPending])),{handleChange:F,handleSubmit:S}=u(),{components:{SetupTOTP:{Header:T=C.Header,Footer:x=C.Footer}}}=p(),[P,V]=r.useState(!0),[R,k]=r.useState(),[I,L]=r.useState(\"COPY\"),[M,$]=r.useState(\"\"),q=m(H),{formFields:D,user:E}=q.context,{totpIssuer:U=\"AWSCognito\",totpUsername:Z=E.username}=null!==(y=null===(O=null==D?void 0:D.setupTOTP)||void 0===O?void 0:O.QR)&&void 0!==y?y:{},A=r.useCallback((t=>e(void 0,void 0,void 0,(function*(){try{const e=yield a.setupTOTP(t);$(e);const o=b(U,Z,e),r=yield i.toDataURL(o);k(r)}catch(e){v.error(e)}finally{V(!1)}}))),[U,Z]);r.useEffect((()=>{E&&A(E)}),[A,E]);return t(j,Object.assign({className:s,variation:l},{children:t(\"form\",Object.assign({\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:F,onSubmit:S},{children:o(d,Object.assign({as:\"fieldset\",direction:\"column\",isDisabled:w},{children:[t(T,{}),o(d,Object.assign({direction:\"column\"},{children:[P?o(\"p\",{children:[n(\"Loading\"),\"…\"]}):t(\"img\",{\"data-amplify-qrcode\":!0,src:R,alt:\"qr code\",width:\"228\",height:\"228\"}),o(d,Object.assign({\"data-amplify-copy\":!0},{children:[t(\"div\",{children:M}),o(d,Object.assign({\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(M),L(n(\"COPIED\"))}},{children:[t(\"div\",Object.assign({\"data-amplify-copy-tooltip\":!0},{children:I})),t(\"svg\",Object.assign({width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},{children:t(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})}))]}))]})),t(g,{}),t(h,{})]})),t(f,{}),t(x,{})]}))}))}))};C.Header=function(){return t(l,Object.assign({level:3},{children:n(\"Setup TOTP\")}))},C.Footer=function(){return null};export{C as SetupTOTP,b as getTotpCode};\n"],"mappings":"AAAA,SAAOA,SAAS,IAAIC,CAApB,QAA0B,0CAA1B;AAAqE,SAAOC,GAAG,IAAIC,CAAd,EAAgBC,IAAI,IAAIC,CAAxB,QAA8B,mBAA9B;AAAkD,OAAOC,CAAP,MAAa,QAAb;AAAsB,OAAM,KAAIC,CAAV,MAAgB,OAAhB;AAAwB,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,IAAI,IAAIC,CAA3B,QAAiC,aAAjC;AAA+C,SAAOC,SAAS,IAAIC,CAApB,EAAsBC,aAAa,IAAIC,CAAvC,QAA6C,iBAA7C;AAA+D,SAAOC,IAAI,IAAIC,CAAf,QAAqB,kCAArB;AAAwD,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,wCAAxB;AAAiE,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,oCAAjC;AAAsE,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,uCAApC;AAA4E,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,6CAAhC;AAA8E,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,kCAApC;AAAuE,SAAOC,kBAAkB,IAAIC,CAA7B,QAAmC,iCAAnC;AAAqE,SAAOC,UAAU,IAAIC,CAArB,QAA2B,yBAA3B;AAAqD,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qCAA/B;;AAAqE,MAAMC,CAAC,GAAC,IAAIzB,CAAJ,CAAM,kBAAN,CAAR;AAAA,MAAkC0B,CAAC,GAAC,CAAClC,CAAD,EAAGE,CAAH,EAAKE,CAAL,KAAS+B,SAAS,CAAE,kBAAiBnC,CAAE,IAAGE,CAAE,WAAUE,CAAE,WAAUJ,CAAE,EAAlD,CAAtD;AAAA,MAA2GoC,CAAC,GAAC,QAA6B;EAAA,IAA5B;IAACC,SAAS,EAAC7B,CAAX;IAAa8B,SAAS,EAACpB;EAAvB,CAA4B;EAAC,IAAIqB,CAAJ,EAAMC,CAAN;EAAQ,MAAK;IAACC,MAAM,EAACC,CAAR;IAAUC,SAAS,EAACC;EAApB,IAAuBxB,CAAC,CAAEpB,CAAC,IAAE,CAACA,CAAC,CAAC2C,SAAH,CAAL,CAA7B;EAAA,MAAkD;IAACE,YAAY,EAACC,CAAd;IAAgBC,YAAY,EAACC;EAA7B,IAAgCxB,CAAC,EAAnF;EAAA,MAAsF;IAACyB,UAAU,EAAC;MAACC,SAAS,EAAC;QAACC,MAAM,EAACC,CAAC,GAAChB,CAAC,CAACe,MAAZ;QAAmBE,MAAM,EAACC,CAAC,GAAClB,CAAC,CAACiB;MAA9B;IAAX;EAAZ,IAA+D/B,CAAC,EAAtJ;EAAA,MAAyJ,CAACiC,CAAD,EAAGC,CAAH,IAAMlD,CAAC,CAACmD,QAAF,CAAW,CAAC,CAAZ,CAA/J;EAAA,MAA8K,CAACC,CAAD,EAAGC,CAAH,IAAMrD,CAAC,CAACmD,QAAF,EAApL;EAAA,MAAiM,CAACG,CAAD,EAAGC,CAAH,IAAMvD,CAAC,CAACmD,QAAF,CAAW,MAAX,CAAvM;EAAA,MAA0N,CAACK,CAAD,EAAGC,CAAH,IAAMzD,CAAC,CAACmD,QAAF,CAAW,EAAX,CAAhO;EAAA,MAA+OO,CAAC,GAAClD,CAAC,CAAC4B,CAAD,CAAlP;EAAA,MAAsP;IAACuB,UAAU,EAACC,CAAZ;IAAcC,IAAI,EAACC;EAAnB,IAAsBJ,CAAC,CAACK,OAA9Q;EAAA,MAAsR;IAACC,UAAU,EAACC,CAAC,GAAC,YAAd;IAA2BC,YAAY,EAACC,CAAC,GAACL,CAAC,CAACM;EAA5C,IAAsD,UAAQlC,CAAC,GAAC,UAAQD,CAAC,GAAC,QAAM2B,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACS,SAA3B,KAAuC,KAAK,CAAL,KAASpC,CAAhD,GAAkD,KAAK,CAAvD,GAAyDA,CAAC,CAACqC,EAArE,KAA0E,KAAK,CAAL,KAASpC,CAAnF,GAAqFA,CAArF,GAAuF,EAAna;EAAA,MAAsaqC,CAAC,GAACvE,CAAC,CAACwE,WAAF,CAAe5E,CAAC,IAAEF,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,EAAuB,aAAW;IAAC,IAAG;MAAC,MAAMA,CAAC,GAAC,MAAMU,CAAC,CAACiE,SAAF,CAAYzE,CAAZ,CAAd;MAA6B6D,CAAC,CAAC/D,CAAD,CAAD;MAAK,MAAMI,CAAC,GAAC8B,CAAC,CAACqC,CAAD,EAAGE,CAAH,EAAKzE,CAAL,CAAT;MAAA,MAAiBM,CAAC,GAAC,MAAMD,CAAC,CAAC0E,SAAF,CAAY3E,CAAZ,CAAzB;MAAwCuD,CAAC,CAACrD,CAAD,CAAD;IAAK,CAAnF,CAAmF,OAAMN,CAAN,EAAQ;MAACiC,CAAC,CAAC+C,KAAF,CAAQhF,CAAR;IAAW,CAAvG,SAA8G;MAACwD,CAAC,CAAC,CAAC,CAAF,CAAD;IAAM;EAAC,CAAzJ,CAAnB,EAAgL,CAACe,CAAD,EAAGE,CAAH,CAAhL,CAAxa;EAA+lBnE,CAAC,CAAC2E,SAAF,CAAa,MAAI;IAACb,CAAC,IAAES,CAAC,CAACT,CAAD,CAAJ;EAAQ,CAA1B,EAA4B,CAACS,CAAD,EAAGT,CAAH,CAA5B;EAAmC,OAAOlE,CAAC,CAAC8B,CAAD,EAAGkD,MAAM,CAACC,MAAP,CAAc;IAAC9C,SAAS,EAAC7B,CAAX;IAAa8B,SAAS,EAACpB;EAAvB,CAAd,EAAwC;IAACkE,QAAQ,EAAClF,CAAC,CAAC,MAAD,EAAQgF,MAAM,CAACC,MAAP,CAAc;MAAC,qBAAoB,EAArB;MAAwB,yCAAwC,EAAhE;MAAmEE,MAAM,EAAC,MAA1E;MAAiFC,QAAQ,EAACxC,CAA1F;MAA4FyC,QAAQ,EAACvC;IAArG,CAAd,EAAsH;MAACoC,QAAQ,EAAChF,CAAC,CAACY,CAAD,EAAGkE,MAAM,CAACC,MAAP,CAAc;QAACK,EAAE,EAAC,UAAJ;QAAeC,SAAS,EAAC,QAAzB;QAAkCC,UAAU,EAAC9C;MAA7C,CAAd,EAA8D;QAACwC,QAAQ,EAAC,CAAClF,CAAC,CAACkD,CAAD,EAAG,EAAH,CAAF,EAAShD,CAAC,CAACY,CAAD,EAAGkE,MAAM,CAACC,MAAP,CAAc;UAACM,SAAS,EAAC;QAAX,CAAd,EAAmC;UAACL,QAAQ,EAAC,CAAC7B,CAAC,GAACnD,CAAC,CAAC,GAAD,EAAK;YAACgF,QAAQ,EAAC,CAACxE,CAAC,CAAC,SAAD,CAAF,EAAc,GAAd;UAAV,CAAL,CAAF,GAAsCV,CAAC,CAAC,KAAD,EAAO;YAAC,uBAAsB,CAAC,CAAxB;YAA0ByF,GAAG,EAACjC,CAA9B;YAAgCkC,GAAG,EAAC,SAApC;YAA8CC,KAAK,EAAC,KAApD;YAA0DC,MAAM,EAAC;UAAjE,CAAP,CAAzC,EAAyH1F,CAAC,CAACY,CAAD,EAAGkE,MAAM,CAACC,MAAP,CAAc;YAAC,qBAAoB,CAAC;UAAtB,CAAd,EAAuC;YAACC,QAAQ,EAAC,CAAClF,CAAC,CAAC,KAAD,EAAO;cAACkF,QAAQ,EAACtB;YAAV,CAAP,CAAF,EAAuB1D,CAAC,CAACY,CAAD,EAAGkE,MAAM,CAACC,MAAP,CAAc;cAAC,yBAAwB,CAAC,CAA1B;cAA4BY,OAAO,EAAC,MAAI;gBAACC,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BpC,CAA9B,GAAiCD,CAAC,CAACjD,CAAC,CAAC,QAAD,CAAF,CAAlC;cAAgD;YAAzF,CAAd,EAAyG;cAACwE,QAAQ,EAAC,CAAClF,CAAC,CAAC,KAAD,EAAOgF,MAAM,CAACC,MAAP,CAAc;gBAAC,6BAA4B,CAAC;cAA9B,CAAd,EAA+C;gBAACC,QAAQ,EAACxB;cAAV,CAA/C,CAAP,CAAF,EAAuE1D,CAAC,CAAC,KAAD,EAAOgF,MAAM,CAACC,MAAP,CAAc;gBAACU,KAAK,EAAC,IAAP;gBAAYC,MAAM,EAAC,IAAnB;gBAAwBK,OAAO,EAAC,WAAhC;gBAA4CC,KAAK,EAAC;cAAlD,CAAd,EAA8F;gBAAChB,QAAQ,EAAClF,CAAC,CAAC,MAAD,EAAQ;kBAACc,CAAC,EAAC;gBAAH,CAAR;cAAX,CAA9F,CAAP,CAAxE;YAAV,CAAzG,CAAH,CAAxB;UAAV,CAAvC,CAAH,CAA1H,EAAoqBd,CAAC,CAAC4B,CAAD,EAAG,EAAH,CAArqB,EAA4qB5B,CAAC,CAAC0B,CAAD,EAAG,EAAH,CAA7qB;QAAV,CAAnC,CAAH,CAAV,EAAkvB1B,CAAC,CAACwB,CAAD,EAAG,EAAH,CAAnvB,EAA0vBxB,CAAC,CAACoD,CAAD,EAAG,EAAH,CAA3vB;MAAV,CAA9D,CAAH;IAAX,CAAtH,CAAR;EAAX,CAAxC,CAAH,CAAR;AAA8hC,CAAnzD;;AAAozDlB,CAAC,CAACe,MAAF,GAAS,YAAU;EAAC,OAAOjD,CAAC,CAACgB,CAAD,EAAGgE,MAAM,CAACC,MAAP,CAAc;IAACkB,KAAK,EAAC;EAAP,CAAd,EAAwB;IAACjB,QAAQ,EAACxE,CAAC,CAAC,YAAD;EAAX,CAAxB,CAAH,CAAR;AAAgE,CAApF,EAAqFwB,CAAC,CAACiB,MAAF,GAAS,YAAU;EAAC,OAAO,IAAP;AAAY,CAArH;AAAsH,SAAOjB,CAAC,IAAIc,SAAZ,EAAsBhB,CAAC,IAAIoE,WAA3B"},"metadata":{},"sourceType":"module"}