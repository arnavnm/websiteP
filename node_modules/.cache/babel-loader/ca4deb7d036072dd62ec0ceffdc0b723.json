{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { fromBase64 } from \"@aws-sdk/util-base64-browser\"; //reference: https://snack.expo.io/r1JCSWRGU\n\nexport var streamCollector = function (stream) {\n  if (typeof Blob === \"function\" && stream instanceof Blob) {\n    return collectBlob(stream);\n  }\n\n  return collectStream(stream);\n};\n\nfunction collectBlob(blob) {\n  return __awaiter(this, void 0, void 0, function () {\n    var base64, arrayBuffer;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , readToBase64(blob)];\n\n        case 1:\n          base64 = _a.sent();\n          arrayBuffer = fromBase64(base64);\n          return [2\n          /*return*/\n          , new Uint8Array(arrayBuffer)];\n      }\n    });\n  });\n}\n\nfunction collectStream(stream) {\n  return __awaiter(this, void 0, void 0, function () {\n    var res, reader, isDone, _a, done, value, prior;\n\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          res = new Uint8Array(0);\n          reader = stream.getReader();\n          isDone = false;\n          _b.label = 1;\n\n        case 1:\n          if (!!isDone) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , reader.read()];\n\n        case 2:\n          _a = _b.sent(), done = _a.done, value = _a.value;\n\n          if (value) {\n            prior = res;\n            res = new Uint8Array(prior.length + value.length);\n            res.set(prior);\n            res.set(value, prior.length);\n          }\n\n          isDone = done;\n          return [3\n          /*break*/\n          , 1];\n\n        case 3:\n          return [2\n          /*return*/\n          , res];\n      }\n    });\n  });\n}\n\nfunction readToBase64(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      var _a; // reference: https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      // response from readAsDataURL is always prepended with \"data:*/*;base64,\"\n\n\n      if (reader.readyState !== 2) {\n        return reject(new Error(\"Reader aborted too early\"));\n      }\n\n      var result = (_a = reader.result) !== null && _a !== void 0 ? _a : \"\"; // Response can include only 'data:' for empty blob, return empty string in this case.\n      // Otherwise, return the string after ','\n\n      var commaIndex = result.indexOf(\",\");\n      var dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n      resolve(result.substring(dataOffset));\n    };\n\n    reader.onabort = function () {\n      return reject(new Error(\"Read aborted\"));\n    };\n\n    reader.onerror = function () {\n      return reject(reader.error);\n    }; // reader.readAsArrayBuffer is not always available\n\n\n    reader.readAsDataURL(blob);\n  });\n}","map":{"version":3,"mappings":"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","names":["fromBase64","streamCollector","stream","Blob","collectBlob","collectStream","blob","readToBase64","base64","_a","arrayBuffer","Uint8Array","res","reader","getReader","isDone","read","_b","done","value","prior","length","set","Promise","resolve","reject","FileReader","onloadend","readyState","Error","result","commaIndex","indexOf","dataOffset","substring","onabort","onerror","error","readAsDataURL"],"sources":["/Users/arnavmisra/Desktop/Portfolio-main/Portfolio/node_modules/@aws-sdk/fetch-http-handler/src/stream-collector.ts"],"sourcesContent":["import { StreamCollector } from \"@aws-sdk/types\";\nimport { fromBase64 } from \"@aws-sdk/util-base64-browser\";\n\n//reference: https://snack.expo.io/r1JCSWRGU\nexport const streamCollector: StreamCollector = (stream: Blob | ReadableStream): Promise<Uint8Array> => {\n  if (typeof Blob === \"function\" && stream instanceof Blob) {\n    return collectBlob(stream);\n  }\n\n  return collectStream(stream as ReadableStream);\n};\n\nasync function collectBlob(blob: Blob): Promise<Uint8Array> {\n  const base64 = await readToBase64(blob);\n  const arrayBuffer = fromBase64(base64);\n  return new Uint8Array(arrayBuffer);\n}\n\nasync function collectStream(stream: ReadableStream): Promise<Uint8Array> {\n  let res = new Uint8Array(0);\n  const reader = stream.getReader();\n  let isDone = false;\n  while (!isDone) {\n    const { done, value } = await reader.read();\n    if (value) {\n      const prior = res;\n      res = new Uint8Array(prior.length + value.length);\n      res.set(prior);\n      res.set(value, prior.length);\n    }\n    isDone = done;\n  }\n  return res;\n}\n\nfunction readToBase64(blob: Blob): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      // reference: https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n      // response from readAsDataURL is always prepended with \"data:*/*;base64,\"\n      if (reader.readyState !== 2) {\n        return reject(new Error(\"Reader aborted too early\"));\n      }\n      const result = (reader.result ?? \"\") as string;\n      // Response can include only 'data:' for empty blob, return empty string in this case.\n      // Otherwise, return the string after ','\n      const commaIndex = result.indexOf(\",\");\n      const dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n      resolve(result.substring(dataOffset));\n    };\n    reader.onabort = () => reject(new Error(\"Read aborted\"));\n    reader.onerror = () => reject(reader.error);\n    // reader.readAsArrayBuffer is not always available\n    reader.readAsDataURL(blob);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}